(window["webpackJsonpreact-antd"]=window["webpackJsonpreact-antd"]||[]).push([[19],{1251:function(e,t,a){},1252:function(e,t,a){},1253:function(e,t,a){},1273:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c={name:"send",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]}},o=a(27),s=function(e,t){return r.a.createElement(o.a,Object.assign({},e,{ref:t,icon:c}))};s.displayName="SendOutlined";t.a=r.a.forwardRef(s)},1281:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(57),o=a(86),s=a(114),l=a(61),i=a(774),m=a(219),u=a(836),d=a(7),f=a(725),g=a(987),v=a(72),_=a.n(v),h=a(715);function E(){return r.a.createElement(h.a,null,r.a.createElement(h.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.alipay.com/"},"1st menu item")),r.a.createElement(h.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.taobao.com/"},"2nd menu item")),r.a.createElement(h.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.tmall.com/"},"3rd menu item")))}a(1251);var p=function(){var e=Object(c.c)((function(e){return e.chatsReducer.userRoom}));return r.a.createElement(f.a,{size:"small",hoverable:!0,title:"List users"},r.a.createElement(m.n,{height:"492px",width:"100%"},r.a.createElement(g.a,{itemLayout:"vertical",size:"small",dataSource:e,renderItem:function(e){return r.a.createElement(g.a.Item,{extra:[r.a.createElement(m.c,{key:"more",menu:E})]},r.a.createElement(g.a.Item.Meta,{title:e.idUser.displayName,avatar:r.a.createElement("div",{className:"img_cont"},r.a.createElement("img",{alt:"avatar",src:e.idUser.photoURL,className:"rounded-circle user_img"}),r.a.createElement("span",{className:"online"===e.status?"online_icon":"online_icon offline"})),description:"online"===e.status?"online":_()(e.updatedAt).fromNow()}))}})))},R=a(70),b=a(807),w=a(68),y={name:"usergroup-delete",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 784H664c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h224c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7zM824 484c0-109.4-87.9-198.3-196.9-200C516.3 282.3 424 373.2 424 484c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 754.6 326 826.8 324 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 707.7 563 684 624 684c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 598.7 658.2 612 624 612s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]}},N=a(27),O=function(e,t){return r.a.createElement(N.a,Object.assign({},e,{ref:t,icon:y}))};O.displayName="UsergroupDeleteOutlined";var M=r.a.forwardRef(O),j=a(1273);a(1252);function x(e){var t=e.message;return e.IDuserCurrent===t.sender._id?r.a.createElement("div",{className:"content_chat_send"},r.a.createElement("div",{className:"img_cont_msg_send"},r.a.createElement("img",{src:t.sender.photoURL,alt:"avatar",className:"rounded-circle user_img_msg"})),r.a.createElement("div",{className:"msg_cotainer_send"},r.a.createElement("p",null,t.message),r.a.createElement("span",{className:"msg_time_send"},_()(t.createdAt).format("DD/MM/YYYY, HH:mm a"),", ",t.sender.displayName))):r.a.createElement("div",{className:"content_chat"},r.a.createElement("div",{className:"img_cont_msg"},r.a.createElement("img",{src:t.sender.photoURL,alt:"avatar",className:"rounded-circle user_img_msg"})),r.a.createElement("div",{className:"msg_cotainer"},r.a.createElement("p",null,t.message),r.a.createElement("span",{className:"msg_time"},_()(t.createdAt).format("DD/MM/YYYY, HH:mm a"),", ",t.sender.displayName)))}a(1253);var C=f.a.Meta,k=b.a.TextArea;function z(e){var t=e.onSendMessage,a=e.userCurrent,o=e.handleLeaveRoom,s=Object(n.useState)(""),l=Object(R.a)(s,2),i=l[0],u=l[1],d=Object(c.c)((function(e){return e.chatsReducer.roomInfo})),g=Object(c.c)((function(e){return e.chatsReducer.messageInRoom}));return r.a.createElement(f.a,{hoverable:!0,size:"small",title:"Messages",extra:[r.a.createElement(w.a,{placement:"topRight",title:"Leave room",key:"leaveRoom"},r.a.createElement(M,{onClick:function(){return o(d._id,a._id)}}))]},r.a.createElement(C,{avatar:r.a.createElement("div",{className:"img_cont_chat"},r.a.createElement("img",{alt:"avatar",src:d.roomImage,className:"rounded-circle_chat user_img_chat"})),title:d.roomName,description:d.userId&&"".concat(d.userId.displayName," created")}),r.a.createElement("div",{className:"chat_list_card_body_chat chat_list_msg_card_body"},r.a.createElement(m.n,{height:"350px",width:"100%"},g.map((function(e,t){return r.a.createElement(x,{key:t,IDuserCurrent:a._id,message:e})})))),r.a.createElement("div",{className:"card-footer",style:{padding:"12px"}},r.a.createElement(b.a.Group,{compact:!0},r.a.createElement(k,{style:{width:"90%"},placeholder:"Please your message input!",autoSize:{minRows:2,maxRows:6},value:i,onChange:function(e){return u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),t({message:i}),u(""))}}),r.a.createElement(j.a,{style:{width:"10%"},onClick:function(e){e.preventDefault(),t({message:i}),u("")}}))))}function I(){var e=Object(o.h)().idRoom,t=Object(n.useContext)(u.a).socketRef,a=Object(c.c)((function(e){return e.userReducer.userInfo})),f=Object(c.c)((function(e){return e.uiReducer.loadingFetchData})),g=Object(o.g)(),v=Object(c.b)();Object(n.useEffect)((function(){v(d.a.chatsActions.checkJoinRoom(e,a._id,g))}),[v,e,a._id,g]),Object(n.useEffect)((function(){var n=t.current;return n.emit("joinRoom",{_id:a._id,idRoom:e}),function(){n.emit("unJoinRoom",{_id:a._id,idRoom:e})}}),[t,a._id,e]),Object(n.useEffect)((function(){var e=t.current;return e.on("sendMessageRoom",(function(e){v(d.a.chatsActions.getMessageRoomAfter(e))})),e.on("joinRoom",(function(e){v(d.a.chatsActions.getUserCurOnl(e))})),e.on("unJoinRoom",(function(e){v(d.a.chatsActions.getUserCurOnl(e))})),e.on("leaveRoom",(function(e){v(d.a.chatsActions.leaveRoom(e))})),e.on("leaveRoomSuccess",(function(){g.push("/chats")})),function(){e.off("sendMessageRoom"),e.off("joinRoom"),e.off("unJoinRoom"),e.off("leaveRoom"),e.off("leaveRoomSuccess")}}),[t,v,g]);var _=Object(n.useCallback)((function(n){var r=n.message;r&&t.current.emit("sendMessageRoom",{message:r,idRoom:e,idUser:a._id})}),[t,e,a._id]);return f>0?r.a.createElement(m.d,null):r.a.createElement(i.a,null,r.a.createElement(s.a,{gutter:[16,16]},r.a.createElement(l.a,{xxl:10,xl:10,lg:10,md:10,sm:24,xs:24},r.a.createElement(p,null)),r.a.createElement(l.a,{xxl:14,xl:14,lg:14,md:14,sm:24,xs:24},r.a.createElement(z,{onSendMessage:_,userCurrent:a,handleLeaveRoom:function(e,a){t.current.emit("leaveRoom",{idRoom:e,idUser:a})}}))))}a.d(t,"default",(function(){return I}))},750:function(e,t,a){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=a(759))&&n.__esModule?n:{default:n};t.default=r,e.exports=r},759:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(0)),r=o(a(760)),c=o(a(34));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){return n.default.createElement(c.default,Object.assign({},e,{ref:t,icon:r.default}))};s.displayName="EyeOutlined";var l=n.default.forwardRef(s);t.default=l},760:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={name:"eye",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]}}},836:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext();a.d(t,"a",(function(){return r}))}}]);